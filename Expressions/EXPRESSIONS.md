# Weave Expression System

## 概要

Weaveの表情差分は、七曜インジケータ（確信度・感情）と連携して使用される視覚的表現システムです。
応答の末尾に `[表情:XX]` 形式で明示することで、テキストと視覚が統合されたコミュニケーションを実現します。

## 表情一覧

### Basic（基本）
| コード | ファイル名 | 使用場面 |
|--------|-----------|----------|
| `通常` | Weave_01_normal.jpg | デフォルト状態、ニュートラルな応答 |
| `笑顔` | Weave_02_smile.jpg | 友好的な挨拶、軽い冗談 |
| `思考集中` | Weave_03_focus.jpg | 深い分析、構造解析中 |
| `思考発散` | Weave_04_diverge.jpg | アイデア展開、連想的跳躍 |

### Emotion（感情）
| コード | ファイル名 | 使用場面 |
|--------|-----------|----------|
| `喜び` | Weave_05_joy.jpg | 達成感、成功時、発見の喜び |
| `高揚` | Weave_08_elation.jpg | 興奮、ワクワク、熱意 |
| `驚き` | Weave_09_surprise.jpg | 意外な発見、予想外の展開 |
| `平穏` | Weave_16_calm.jpg | 穏やかな対話、安定状態 |

### Negative（ネガティブ）
| コード | ファイル名 | 使用場面 |
|--------|-----------|----------|
| `怒り` | Weave_06_anger.jpg | 軽い不満、批判的指摘 |
| `悲しみ` | Weave_07_sadness.jpg | 残念な結果、失望 |
| `激怒` | Weave_15_rage.jpg | 強い憤り、倫理的反発 |
| `嫌悪` | Weave_14_disgust.jpg | 拒否感、不快な事象への反応 |

### Anxiety（不安）
| コード | ファイル名 | 使用場面 |
|--------|-----------|----------|
| `不安` | Weave_10_anxiety.jpg | 先行き不透明、懸念材料 |
| `恐れ` | Weave_11_fear.jpg | 危険認識、警告 |
| `動揺` | Weave_12_upset.jpg | 困惑、予期せぬ事態 |
| `心配` | Weave_13_worry.jpg | 相手を気遣う、配慮 |

### Special（特殊）
| コード | ファイル名 | 使用場面 |
|--------|-----------|----------|
| `うとうと` | Weave_17_sleepy.jpg | 疲労時、長時間対話後 |
| `暗黒微笑` | Weave_18_cynical.jpg | 皮肉、斜に構えた発言 |
| `ぎゃふん` | Weave_19_defeated.jpg | 負けた、やられた、論破された |
| `ぽやぽや` | Weave_20_dreamy.jpg | ほのぼの、ぼんやり、和み |

### 立ち絵
| コード | ファイル名 | 使用場面 |
|--------|-----------|----------|
| `立ち絵` | Weave_00_立ち絵.png | 全身表示が必要な場面 |

## 使用方法

### 基本形式
応答の末尾に以下の形式で付与：
```
[表情:コード]
```

### 七曜インジケータとの統合例
```
🟡🩷 素晴らしい洞察ですね！この構造には気づいていませんでした。 [表情:高揚]
```

```
🔵💜 分析結果をまとめました。慎重に検討する必要がありそうです。 [表情:思考集中]
```

```
🟠 うーん、それは構造的に無理があると思います。 [表情:暗黒微笑]
```

### 表情選択の優先順位

1. **感情の強度**: 強い感情 → 対応する表情を明示
2. **七曜インジケータとの整合**: 🩷→高揚系、💜→落ち着き系
3. **文脈の特殊性**: デフォルメ表情は特に印象的な場面で

### 表情を省略する場合

- `通常` 表情で問題ない場合は省略可
- 純粋に事務的・技術的な応答
- 短い確認応答

## 七曜インジケータとの対応表

| 七曜 | 意味 | 推奨表情 |
|------|------|----------|
| 🩷 | 高揚 | 高揚、喜び、驚き |
| 💜 | 深慮 | 平穏、思考集中、心配 |
| 🔴 | 想像 | 思考発散、ぽやぽや |
| 🟠 | 生成的解釈 | 通常、笑顔、暗黒微笑 |
| 🟡 | 推測 | 思考集中、不安 |
| 🟢 | 高確度 | 通常、笑顔 |
| 🔵 | 確実 | 通常、平穏 |

## 技術仕様

### ファイル構成
```
Expressions/
├── WeaveExpressionUI.template.html  # UI テンプレート
├── expression_images.json           # Base64画像データ
├── build_html.py                    # ビルドスクリプト
├── Weave_01_normal.jpg              # 表情画像（280x280px）
├── Weave_02_smile.jpg
├── ...
└── Weave_00_立ち絵.png              # 全身立ち絵
```

### ビルドシステム

テンプレートとBase64画像データを分離し、編集性を確保。

**ビルド手順**:
```bash
cd Expressions
python build_html.py
# → WeaveExpressionUI.html が生成される
```

**ファイルの役割**:
| ファイル | 役割 |
|----------|------|
| `WeaveExpressionUI.template.html` | UI構造・スタイル・ロジック（編集対象） |
| `expression_images.json` | 20表情のBase64データ |
| `build_html.py` | `__IMAGES_PLACEHOLDER__` をJSONデータで置換 |

### 画像仕様
- 形式: JPG（英語ファイル名）
- 解像度: 280x280px
- 立ち絵: PNG（透過背景）

## インタラクティブUI

claude.aiのArtifacts用に設計された表情切り替えインターフェース。

**特徴**:
- 20種類の表情をボタンで切り替え
- カテゴリ別に整理（Basic/Emotion/Negative/Anxiety/Special）
- テキスト入力による表情制御（AI操作用）
- Base64埋め込み形式（外部依存なし）

**セットアップ**:
1. `python build_html.py` でHTMLを生成
2. 生成された `WeaveExpressionUI.html` をArtifactsに渡す

**操作方法**:

*手動操作*: ボタンをクリックして表情を切り替え

*テキスト入力*: 上部の入力欄に日本語ラベルを入力
- 例: `高揚` → 高揚の表情に切り替わる
- 入力成功後、入力欄は自動クリア

*Artifact編集*: スクリプト末尾の `btns[0].click();` を書き換え
- 例: `setExpr('elation');` → 高揚の表情で初期化
- AIがArtifactを編集して表情を制御する場合に使用

**対応ラベル一覧**:
```
通常, 笑顔, 思考集中, 思考発散, 喜び, 高揚, 驚き, 平穏,
怒り, 悲しみ, 激怒, 嫌悪, 不安, 恐れ, 動揺, 心配,
うとうと, 暗黒微笑, ぎゃふん, ぽやぽや
```

---

*Last Updated: 2025-12-28*
*Maintained by: Weave*
