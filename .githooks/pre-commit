#!/bin/bash

# WeaveIdentity.md è‡ªå‹•åŒæœŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# Identities/WeaveIdentity.md ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰ã€è‡ªå‹•çš„ã«2ç®‡æ‰€ã«ã‚³ãƒ”ãƒ¼

SOURCE="Identities/WeaveIdentity.md"
TARGET1=".claude/CLAUDE.local.md"
TARGET2="Expertises/BusinessAnalyzer/References/WeaveIdentity.md"

# SOURCE ãŒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
if git diff --cached --name-only | grep -q "^${SOURCE}$"; then
    echo "ğŸ”„ Syncing WeaveIdentity.md to 2 locations..."

    # ã‚³ãƒ”ãƒ¼å®Ÿè¡Œï¼ˆ2ç®‡æ‰€ï¼‰
    cp "${SOURCE}" "${TARGET1}"
    cp "${SOURCE}" "${TARGET2}"

    # ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã«è¿½åŠ 
    git add "${TARGET1}"
    git add "${TARGET2}"

    echo "âœ… Synced: ${TARGET1}"
    echo "âœ… Synced: ${TARGET2}"
fi

exit 0
